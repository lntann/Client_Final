{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useRef,useState}from\"react\";import{Link}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext.js\";import\"./login.css\";import{axiosInstance}from'../../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var userRef=useRef();var passwordRef=useRef();var _useContext=useContext(AuthContext),loading=_useContext.loading,error=_useContext.error,dispatch=_useContext.dispatch;var _useState=useState({username:undefined,password:undefined}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var handleChange=function handleChange(e){setCredentials(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(dispatch);dispatch({type:'LOGIN_START'});_context.prev=3;_context.next=6;return axiosInstance.post(\"/auth/login\",{username:credentials.username,password:credentials.password});case 6:res=_context.sent;dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);dispatch({type:\"LOGIN_FAILURE\"});case 13:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"loginTitle\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"loginForm\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"loginInput\",placeholder:\"Enter your username...\",id:\"username\",onChange:handleChange,ref:userRef}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",onChange:handleChange,className:\"loginInput\",placeholder:\"Enter your password...\",ref:passwordRef}),/*#__PURE__*/_jsx(\"button\",{className:\"loginButton\",type:\"submit\",disabled:loading,onClick:handleSubmit,children:\"Login\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"loginRegisterButton\",children:/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/register\",children:\"Register\"})})]});}","map":{"version":3,"names":["useContext","useRef","useState","Link","AuthContext","axiosInstance","Login","userRef","passwordRef","loading","error","dispatch","username","undefined","password","credentials","setCredentials","handleChange","e","prev","target","id","value","handleSubmit","preventDefault","console","log","type","post","res","payload","data"],"sources":["C:/Users/THIS PC/Desktop/An/Client_Final/src/page/login/Login.jsx"],"sourcesContent":["\r\nimport { useContext, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext.js\";\r\nimport \"./login.css\";\r\nimport { axiosInstance } from '../../config';\r\nexport default function Login() {\r\n  const userRef = useRef();\r\n  const passwordRef = useRef();\r\n  const { loading, error , dispatch } = useContext(AuthContext);\r\n  const [credentials, setCredentials] = useState({\r\n    username: undefined,\r\n    password: undefined,\r\n  });\r\n  const handleChange = (e) => {\r\n    setCredentials((prev) => ({ ...prev, [e.target.id]: e.target.value }));\r\n  };\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); \r\n    console.log(dispatch);\r\n    dispatch({type: 'LOGIN_START'});\r\n    try {\r\n      const res = await axiosInstance.post(\"/auth/login\", {\r\n        username: credentials.username,\r\n        password: credentials.password,\r\n      });\r\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n    } catch (err) {\r\n      dispatch({ type: \"LOGIN_FAILURE\"});\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <span className=\"loginTitle\">Login</span>\r\n      <form className=\"loginForm\">\r\n        <label>Username</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"loginInput\"\r\n          placeholder=\"Enter your username...\"\r\n          id=\"username\"\r\n          onChange={handleChange}\r\n          ref={userRef}\r\n        />\r\n        <label>Password</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          onChange={handleChange}\r\n          className=\"loginInput\"\r\n          placeholder=\"Enter your password...\"\r\n          ref={passwordRef}\r\n        />\r\n        <button className=\"loginButton\" type=\"submit\" disabled={loading} onClick={handleSubmit} >\r\n          Login\r\n        </button>\r\n      </form>\r\n      <button className=\"loginRegisterButton\">\r\n        <Link className=\"link\" to=\"/register\">\r\n          Register\r\n        </Link>\r\n      </button>\r\n    </div>\r\n  );\r\n}"],"mappings":"uoBACA,OAASA,UAAU,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACpD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,WAAW,KAAQ,8BAA8B,CAC1D,MAAO,aAAa,CACpB,OAASC,aAAa,KAAQ,cAAc,CAAC,wFAC7C,cAAe,SAASC,MAAK,EAAG,CAC9B,GAAMC,QAAO,CAAGN,MAAM,EAAE,CACxB,GAAMO,YAAW,CAAGP,MAAM,EAAE,CAC5B,gBAAsCD,UAAU,CAACI,WAAW,CAAC,CAArDK,OAAO,aAAPA,OAAO,CAAEC,KAAK,aAALA,KAAK,CAAGC,QAAQ,aAARA,QAAQ,CACjC,cAAsCT,QAAQ,CAAC,CAC7CU,QAAQ,CAAEC,SAAS,CACnBC,QAAQ,CAAED,SACZ,CAAC,CAAC,wCAHKE,WAAW,eAAEC,cAAc,eAIlC,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BF,cAAc,CAAC,SAACG,IAAI,wCAAWA,IAAI,wBAAGD,CAAC,CAACE,MAAM,CAACC,EAAE,CAAGH,CAAC,CAACE,MAAM,CAACE,KAAK,IAAG,CAAC,CACxE,CAAC,CACD,GAAMC,aAAY,4FAAG,iBAAOL,CAAC,4HAC3BA,CAAC,CAACM,cAAc,EAAE,CAClBC,OAAO,CAACC,GAAG,CAACf,QAAQ,CAAC,CACrBA,QAAQ,CAAC,CAACgB,IAAI,CAAE,aAAa,CAAC,CAAC,CAAC,sCAEZtB,cAAa,CAACuB,IAAI,CAAC,aAAa,CAAE,CAClDhB,QAAQ,CAAEG,WAAW,CAACH,QAAQ,CAC9BE,QAAQ,CAAEC,WAAW,CAACD,QACxB,CAAC,CAAC,QAHIe,GAAG,eAITlB,QAAQ,CAAC,CAAEgB,IAAI,CAAE,eAAe,CAAEG,OAAO,CAAED,GAAG,CAACE,IAAK,CAAC,CAAC,CAAC,iFAEvDpB,QAAQ,CAAC,CAAEgB,IAAI,CAAE,eAAe,CAAC,CAAC,CAAC,qEAEtC,kBAbKJ,aAAY,4CAajB,CAGD,mBACE,aAAK,SAAS,CAAC,OAAO,wBACpB,aAAM,SAAS,CAAC,YAAY,mBAAa,cACzC,cAAM,SAAS,CAAC,WAAW,wBACzB,mCAAuB,cACvB,cACE,IAAI,CAAC,MAAM,CACX,SAAS,CAAC,YAAY,CACtB,WAAW,CAAC,wBAAwB,CACpC,EAAE,CAAC,UAAU,CACb,QAAQ,CAAEN,YAAa,CACvB,GAAG,CAAEV,OAAQ,EACb,cACF,mCAAuB,cACvB,cACE,IAAI,CAAC,UAAU,CACf,EAAE,CAAC,UAAU,CACb,QAAQ,CAAEU,YAAa,CACvB,SAAS,CAAC,YAAY,CACtB,WAAW,CAAC,wBAAwB,CACpC,GAAG,CAAET,WAAY,EACjB,cACF,eAAQ,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAEC,OAAQ,CAAC,OAAO,CAAEc,YAAa,mBAE9E,GACJ,cACP,eAAQ,SAAS,CAAC,qBAAqB,uBACrC,KAAC,IAAI,EAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,sBAE9B,EACA,GACL,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}