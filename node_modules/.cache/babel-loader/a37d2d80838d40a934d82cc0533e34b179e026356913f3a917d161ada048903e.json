{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/THIS PC/Desktop/An/Client_Final/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./settings.css\";import Sidebar from\"../../components/sidebar/Sidebar\";import{useContext,useState}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{axiosInstance}from'../../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Settings(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var _useContext=useContext(AuthContext),user=_useContext.user,dispatch=_useContext.dispatch;// const PF = \"http://localhost:3001/images/\"\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updatedUser,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"UPDATE_START\"});updatedUser={userId:user._id,username:username,email:email,password:password};if(!file){_context.next=16;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);updatedUser.profilePic=filename;_context.prev=9;_context.next=12;return axiosInstance.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axiosInstance.put(\"/users/\"+user._id,updatedUser);case 19:res=_context.sent;setSuccess(true);dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});_context.next=27;break;case 24:_context.prev=24;_context.t1=_context[\"catch\"](16);dispatch({type:\"UPDATE_FAILURE\"});case 27:case\"end\":return _context.stop();}}},_callee,null,[[9,14],[16,24]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsTitle\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"settingsUpdateTitle\",children:\"Update Your Account\"}),/*#__PURE__*/_jsx(\"span\",{className:\"settingsDeleteTitle\",children:\"Delete Account\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"settingsForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"settingsPP\",children:[/*#__PURE__*/_jsx(\"img\",{// src={file ? URL.createObjectURL(file) : PF+user.profilePic}\nalt:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"settingsPPIcon far fa-user-circle\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:user.email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"settingsSubmit\",type:\"submit\",children:\"Update\"}),success&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\",textAlign:\"center\",marginTop:\"20px\"},children:\"Profile has been updated...\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{})]});}","map":{"version":3,"names":["Sidebar","useContext","useState","AuthContext","axios","axiosInstance","Settings","file","setFile","username","setUsername","email","setEmail","password","setPassword","success","setSuccess","user","dispatch","handleSubmit","e","preventDefault","type","updatedUser","userId","_id","data","FormData","filename","Date","now","name","append","profilePic","post","put","res","payload","display","target","files","value","color","textAlign","marginTop"],"sources":["C:/Users/THIS PC/Desktop/An/Client_Final/src/page/settings/Settings.jsx"],"sourcesContent":["import \"./settings.css\";\r\nimport Sidebar from \"../../components/sidebar/Sidebar\";\r\nimport { useContext, useState } from \"react\";\r\nimport { AuthContext  } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { axiosInstance } from '../../config';\r\n\r\nexport default function Settings() {\r\n  const [file, setFile] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const { user, dispatch } = useContext( AuthContext );\r\n // const PF = \"http://localhost:3001/images/\"\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: \"UPDATE_START\" });\r\n    const updatedUser = {\r\n      userId: user._id,\r\n      username,\r\n      email,\r\n      password,\r\n    };\r\n    if (file) {\r\n      const data = new FormData();\r\n      const filename = Date.now() + file.name;\r\n      data.append(\"name\", filename);\r\n      data.append(\"file\", file);\r\n      updatedUser.profilePic = filename;\r\n      try {\r\n        await axiosInstance.post(\"/upload\", data);\r\n      } catch (err) {}\r\n    }\r\n    try {\r\n      const res = await axiosInstance.put(\"/users/\" + user._id, updatedUser);\r\n      setSuccess(true);\r\n      dispatch({ type: \"UPDATE_SUCCESS\", payload: res.data });\r\n    } catch (err) {\r\n      dispatch({ type: \"UPDATE_FAILURE\" });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"settings\">\r\n      <div className=\"settingsWrapper\">\r\n        <div className=\"settingsTitle\">\r\n          <span className=\"settingsUpdateTitle\">Update Your Account</span>\r\n          <span className=\"settingsDeleteTitle\">Delete Account</span>\r\n        </div>\r\n        <form className=\"settingsForm\" onSubmit={handleSubmit}>\r\n          <label>Profile Picture</label>\r\n          <div className=\"settingsPP\">\r\n            <img\r\n             // src={file ? URL.createObjectURL(file) : PF+user.profilePic}\r\n              alt=\"\"\r\n            />\r\n            <label htmlFor=\"fileInput\">\r\n              <i className=\"settingsPPIcon far fa-user-circle\"></i>\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              id=\"fileInput\"\r\n              style={{ display: \"none\" }}\r\n              onChange={(e) => setFile(e.target.files[0])}\r\n            />\r\n          </div>\r\n          <label>Username</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder={user.username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n          <label>Email</label>\r\n          <input\r\n            type=\"email\"\r\n            placeholder={user.email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <label>Password</label>\r\n          <input\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <button className=\"settingsSubmit\" type=\"submit\">\r\n            Update\r\n          </button>\r\n          {success && (\r\n            <span\r\n              style={{ color: \"green\", textAlign: \"center\", marginTop: \"20px\" }}\r\n            >\r\n              Profile has been updated...\r\n            </span>\r\n          )}\r\n        </form>\r\n      </div>\r\n      <Sidebar />\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}